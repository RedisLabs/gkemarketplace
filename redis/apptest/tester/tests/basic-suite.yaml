actions: #TODO test and write new tests
- name: kubectl smoke test
  bashTest:
    script: kubectl version
    expect:
      exitCode:
        equals: 0
- name: Waiting for RedisEnterpriseClusters CRDs created
  bashTest:
    script: |
      timeout 120 bash -c '
      until kubectl get crd redisenterpriseclusters.app.redislabs.com;
            do echo "Waiting for RedisEnterpriseClusters CRDs created"; sleep 5;
      done'
    expect:
      exitCode:
        equals: 0
- name: Waiting for RedisEnterpriseClusters CRDs created
  bashTest:
    script: |
      timeout 120 bash -c '
      until kubectl get crd redisenterpriseclusters.app.redislabs.com;
            do echo "Waiting for RedisEnterpriseClusters CRDs created"; sleep 5;
      done'
    expect:
      exitCode:
        equals: 0
- name: Waiting for redis-enterprise-services-rigger pods to be created
  bashTest:
    script: |
      timeout 120 bash -c '
      until kubectl get pod -n ${NAMESPACE} | grep redis-enterprise-services-rigger
            do echo "Waiting for  redis-enterprise-services-rigger pods to be created"; sleep 5;
      done'
    expect:
      exitCode:
        equals: 0
