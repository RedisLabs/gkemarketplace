actions: #TODO test and write new tests
- name: kubectl smoke test
  bashTest:
    script: kubectl version
    expect:
      exitCode:
        equals: 0
- name: Waiting for RedisEnterpriseClusters CRDs created
  bashTest:
    script: |
      timeout 120 bash -c '
      until kubectl get crd redisenterpriseclusters.app.redislabs.com;
            do echo "Waiting for RedisEnterpriseClusters CRDs created"; sleep 5;
      done'
    expect:
      exitCode:
        equals: 0
- name: Waiting for redis-enterprise-operator deployment to be created
  bashTest:
    script: |
      timeout 120 bash -c '
      until kubectl get deployment -n ${NAMESPACE} | grep redis-enterprise-operator
            do echo "Waiting for redis-enterprise-operator deployment to be created"; sleep 5;
      done'
    expect:
      exitCode:
        equals: 0
